{"version":3,"file":"js/stock.b3d00190.js","mappings":"oKAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,WAAW,CAACG,MAAM,CAAC,UAAU,GAAG,KAAO,wBAAwB,KAAO,SAASC,YAAYR,EAAIS,GAAG,CAAC,CAACC,IAAI,QAAQC,GAAG,WAAW,MAAO,CAACP,EAAG,KAAK,CAACJ,EAAIY,GAAG,YAAYC,OAAM,OAAUT,EAAG,WAAW,CAACU,MAAM,CAACC,MAAOf,EAAU,OAAEgB,SAAS,SAAUC,GAAMjB,EAAIkB,OAAOD,GAAKE,WAAW,WAAWnB,EAAIoB,GAAIpB,EAAU,QAAE,SAASqB,EAAKC,GAAG,OAAOlB,EAAG,UAAU,CAACM,IAAIY,EAAEf,MAAM,CAAC,MAAQP,EAAIuB,QAAQD,KAAK,CAAClB,EAAG,iBAAiB,CAACG,MAAM,CAAC,MAAQ,KAAK,CAACH,EAAG,WAAW,CAACJ,EAAIoB,GAAIpB,EAAIwB,OAAOF,IAAI,SAASG,EAAMC,GAAO,OAAOtB,EAAG,MAAM,CAACM,IAAIgB,EAAMpB,YAAY,cAAc,CAACF,EAAG,OAAO,CAACE,YAAY,OAAO,CAACN,EAAIY,GAAGZ,EAAI2B,GAAGD,EAAM,MAAMtB,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACN,EAAIY,GAAGZ,EAAI2B,GAAGF,EAAMG,SAASxB,EAAG,OAAO,CAACE,YAAY,QAAQuB,MAAMJ,EAAMK,SAAS,EAAE,KAAK,QAAQ,CAAC1B,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,WAAW,GAAGH,EAAG,OAAO,CAACE,YAAY,SAAS,CAACN,EAAIY,GAAGZ,EAAI2B,GAAGF,EAAMV,gBAAe,IAAI,IAAI,MAAK,IAAI,IACh9BgB,EAAkB,G,SCgCtB,GACAC,OACA,OACAd,OAAAA,EACAK,QAAAA,CAAAA,KAAAA,KAAAA,KAAAA,MACAC,OAAAA,KAGAS,UAEA,mCACA,kBAAAC,KAAAA,IAsBA,2CClEiQ,I,UCQ7PC,GAAY,OACd,EACApC,EACAgC,GACA,EACA,KACA,WACA,MAIF,EAAeI,EAAiB","sources":["webpack://vue2_finance/./src/views/Stock.vue?974b","webpack://vue2_finance/src/views/Stock.vue","webpack://vue2_finance/./src/views/Stock.vue?db52","webpack://vue2_finance/./src/views/Stock.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"stock\"},[_c('van-cell',{attrs:{\"is-link\":\"\",\"icon\":\"./imgs/stock_icon.png\",\"size\":\"large\"},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('h5',[_vm._v(\"股票榜单\")])]},proxy:true}])}),_c('van-tabs',{model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},_vm._l((_vm.stocks),function(item,i){return _c('van-tab',{key:i,attrs:{\"title\":_vm.markets[i]}},[_c('van-cell-group',{attrs:{\"inset\":\"\"}},[_c('van-cell',[_vm._l((_vm.stocks[i]),function(stock,index){return _c('div',{key:index,staticClass:\"stock_item\"},[_c('span',{staticClass:\"num\"},[_vm._v(_vm._s(index+1))]),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(stock.name))]),_c('span',{staticClass:\"arrow\",class:stock.percent>=0?'up':'down'},[_c('van-icon',{attrs:{\"name\":\"down\"}})],1),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(stock.value))])])})],2)],1)],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"stock\">\r\n        <van-cell  is-link icon=\"./imgs/stock_icon.png\" size=\"large\">\r\n            <template #title>\r\n                <h5>股票榜单</h5>  \r\n            </template>\r\n        </van-cell>\r\n        <!-- 股票榜单 -->\r\n        <van-tabs v-model:active=\"active\" >\r\n            <van-tab :title=\"markets[i]\" v-for=\"item,i in stocks\" :key=\"i\">\r\n                 <van-cell-group inset>\r\n                    <van-cell>\r\n                        <template>\r\n                            <div class=\"stock_item\" v-for=\"stock,index in stocks[i]\" :key=\"index\">\r\n                                <span class=\"num\">{{index+1}}</span>\r\n                                <span class=\"name\">{{stock.name}}</span>\r\n                                <span class=\"arrow\" :class=\"stock.percent>=0?'up':'down'\">\r\n                                    <van-icon name=\"down\" />\r\n                                </span>\r\n                                <span class=\"value\">{{stock.value}}</span>\r\n                            </div> \r\n                        </template>\r\n                    </van-cell>\r\n                 </van-cell-group>\r\n            </van-tab>\r\n        \r\n        </van-tabs>\r\n       \r\n    </div>\r\n</template>\r\n\r\n<script >\r\nimport * as api from \"@/api/index\"\r\nexport default{ \r\n    data(){\r\n        return{\r\n            active:0,\r\n            markets:[\"全球\",\"沪深\",\"港股\",\"美股\"],\r\n            stocks:[]\r\n        }\r\n    },\r\n    mounted(){\r\n        let num = 0\r\n        this.markets.forEach(async (item,i) => {\r\n            let result = await api.getStocks({type:i})\r\n            \r\n            \r\n            // push方法可以触发页面更新，但是由于数据接收是异步的无法保证顺序跟索引值一致\r\n            // this.stocks.push(result.data.items)\r\n            // 因此采用对应索引值获取数组数据来确保数据顺序不变\r\n            // 但是由于更新索引值无法使vue触发页面更新,因此在下方进行内存重新解构与创建来更新检测\r\n            // this.stocks[i] = result.data.items\r\n            // num++;\r\n            // // 判断来保证数据为最后一次计数时的结果\r\n            // if(num==4){\r\n            //     // 内存更新检测\r\n            //     // this.stocks=[...this.stocks]\r\n            //     console.log(this.stocks)\r\n            //     // vue自带的页面更新检测\r\n            //     // this.$forceUpdate();\r\n\r\n            // }\r\n\r\n\r\n\r\n            // 响应式对象 数组更新检测\r\n            this.$set(this.stocks,i,result.data.items)\r\n            // console.log(this.stocks)\r\n        });\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.stock{\r\n    h5{\r\n        font-size:00.3rem;\r\n        margin:0;\r\n        color:#666;\r\n        text-align:left;\r\n        line-height: inherit;\r\n    }\r\n    .van-icon__image{\r\n        width:25px;\r\n        height:25px;\r\n    }\r\n    .arrow.up{\r\n        transform-origin:center;\r\n        transform:rotate(180deg);\r\n        color: red;\r\n    }\r\n    .arrow.down{\r\n        color: darkgreen;\r\n    }\r\n    .stock_item{\r\n        display: flex;\r\n        height: 40px;\r\n       \r\n        .num{\r\n            flex:1;\r\n        }\r\n        .name{\r\n            flex:7;\r\n        }\r\n        .arrow{\r\n            flex:1;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n\r\n        }\r\n        .value{\r\n            flex:2;\r\n             display: flex;\r\n            align-items: center;\r\n            justify-content: flex-end;\r\n        }\r\n    }\r\n    ::v-deep .van-tabs__line{\r\n        background-color: #1989fa;\r\n    }\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Stock.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Stock.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Stock.vue?vue&type=template&id=2c126308&scoped=true&\"\nimport script from \"./Stock.vue?vue&type=script&lang=js&\"\nexport * from \"./Stock.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Stock.vue?vue&type=style&index=0&id=2c126308&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2c126308\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","scopedSlots","_u","key","fn","_v","proxy","model","value","callback","$$v","active","expression","_l","item","i","markets","stocks","stock","index","_s","name","class","percent","staticRenderFns","data","mounted","type","component"],"sourceRoot":""}