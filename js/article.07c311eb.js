"use strict";(self["webpackChunkvue2_finance"]=self["webpackChunkvue2_finance"]||[]).push([[942],{4840:function(t,e,s){s.r(e),s.d(e,{default:function(){return m}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"article"},[t.article&&t.article.original_status?[s("van-nav-bar",{attrs:{fixed:!0,placeholder:!0,title:t.article.original_status.title,"left-text":"返回","left-arrow":""},on:{"click-left":t.goBack}}),s("div",{staticClass:"cell-header"},[s("van-image",{attrs:{round:"",width:"30",height:"30",src:t.article.original_status.user.photo_domain+t.article.original_status.user.profile_image_url.split(",")[0]}}),s("div",{staticClass:"right-header"},[s("div",{staticClass:"author"},[t._v(t._s(t.article.original_status.user.screen_name))]),s("div",{staticClass:"pubtime"},[t._v(t._s(t.article.original_status.timeBefore))])])],1),s("div",{staticClass:"content",domProps:{innerHTML:t._s(t.article.original_status&&t.article.original_status.text)}})]:t._e(),t.articleCache&&t.articleCache.original_status?[s("van-nav-bar",{attrs:{fixed:!0,placeholder:!0,title:t.articleCache.original_status.title,"left-text":"返回","left-arrow":""},on:{"click-left":t.goBack}}),s("div",{staticClass:"cell-header"},[s("van-image",{attrs:{round:"",width:"30",height:"30",src:t.articleCache.original_status.user.photo_domain+t.articleCache.original_status.user.profile_image_url.split(",")[0]}}),s("div",{staticClass:"right-header"},[s("div",{staticClass:"author"},[t._v(t._s(t.articleCache.original_status.user.screen_name))]),s("div",{staticClass:"pubtime"},[t._v(t._s(t.articleCache.original_status.timeBefore))])])],1),s("div",{staticClass:"content",domProps:{innerHTML:t._s(t.articleCache.original_status&&t.articleCache.original_status.text)}})]:t._e(),s("div",{staticClass:"comments"},[s("h3",[t._v("评论")]),s("div",{staticClass:"comment-list"},t._l(t.comments,(function(e,a){return s("div",{key:a,staticClass:"comment-item"},[s("div",{staticClass:"cell-header"},[s("van-image",{attrs:{round:"",width:"30",height:"30",src:e.user.photo_domain+e.user.profile_image_url.split(",")[0]}}),s("div",{staticClass:"right-header"},[s("div",{staticClass:"author"},[t._v(t._s(e.user.screen_name))])])],1),s("p",{staticClass:"text",domProps:{innerHTML:t._s(e.text)}})])})),0)]),s("div",{staticClass:"input-comments"},[s("van-field",{attrs:{rows:"2",autosize:"",label:"评论",type:"textarea",maxlength:"50",placeholder:"请输入评论","show-word-limit":""},model:{value:t.commnetValue,callback:function(e){t.commnetValue=e},expression:"commnetValue"}})],1),s("van-button",{staticClass:"btn",attrs:{type:"info",block:"",size:"small"},on:{click:t.commitComment}},[t._v("提交评论")])],2)},i=[],r=s(693),l=s(8256),c={data(){return{articleCache:{},comments:[],commnetValue:""}},props:["article"],methods:{goBack(){this.$router.go(-1)},async getComments(){let t=await r.lk({id:this.$route.params.id});console.log(t),this.comments=t.comments},async commitComment(){if(this.$store.state.user&&this.$store.state.user.token){let t=await r.eW({id:this.$route.params.id,commnetValue:this.message});"ok"===t.result&&l.Z.success("评论成功")}else l.Z.fail("尚未登录，请登录后评论"),this.$router.push("/login")}},mounted(){let t={};this.article?(t[this.article.id]=this.article,sessionStorage.articles=JSON.stringify(t)):sessionStorage.articles&&(t=JSON.parse(sessionStorage.articles),this.articleCache=t[this.$route.params.id]),this.getComments()},activated(){let t={};this.article?(t[this.article.id]=this.article,sessionStorage.articles=JSON.stringify(t)):sessionStorage.articles&&(t=JSON.parse(sessionStorage.articles),this.articleCache=t[this.$route.params.id]),this.getComments()}},o=c,n=s(1001),u=(0,n.Z)(o,a,i,!1,null,"63b38193",null),m=u.exports}}]);
//# sourceMappingURL=article.07c311eb.js.map