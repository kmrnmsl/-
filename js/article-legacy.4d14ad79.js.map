{"version":3,"file":"js/article-legacy.4d14ad79.js","mappings":"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","sources":["webpack://vue2_finance/./src/views/Article.vue?96b7","webpack://vue2_finance/src/views/Article.vue","webpack://vue2_finance/./src/views/Article.vue?4363","webpack://vue2_finance/./src/views/Article.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article\"},[(_vm.article && _vm.article.original_status)?[_c('van-nav-bar',{attrs:{\"fixed\":true,\"placeholder\":true,\"title\":_vm.article.original_status.title,\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.goBack}}),_c('div',{staticClass:\"cell-header\"},[_c('van-image',{attrs:{\"round\":\"\",\"width\":\"30\",\"height\":\"30\",\"src\":_vm.article.original_status.user.photo_domain\n                    +_vm.article.original_status.user.profile_image_url.split(',')[0]}}),_c('div',{staticClass:\"right-header\"},[_c('div',{staticClass:\"author\"},[_vm._v(_vm._s(_vm.article.original_status.user.screen_name))]),_c('div',{staticClass:\"pubtime\"},[_vm._v(_vm._s(_vm.article.original_status.timeBefore))])])],1),_c('div',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(_vm.article.original_status&&_vm.article.original_status.text)}})]:_vm._e(),(_vm.articleCache&&_vm.articleCache.original_status)?[_c('van-nav-bar',{attrs:{\"fixed\":true,\"placeholder\":true,\"title\":_vm.articleCache.original_status.title,\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.goBack}}),_c('div',{staticClass:\"cell-header\"},[_c('van-image',{attrs:{\"round\":\"\",\"width\":\"30\",\"height\":\"30\",\"src\":_vm.articleCache.original_status.user.photo_domain\n                    +_vm.articleCache.original_status.user.profile_image_url.split(',')[0]}}),_c('div',{staticClass:\"right-header\"},[_c('div',{staticClass:\"author\"},[_vm._v(_vm._s(_vm.articleCache.original_status.user.screen_name))]),_c('div',{staticClass:\"pubtime\"},[_vm._v(_vm._s(_vm.articleCache.original_status.timeBefore))])])],1),_c('div',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(_vm.articleCache.original_status&&_vm.articleCache.original_status.text)}})]:_vm._e(),_c('div',{staticClass:\"comments\"},[_c('h3',[_vm._v(\"评论\")]),_c('div',{staticClass:\"comment-list\"},_vm._l((_vm.comments),function(comment,i){return _c('div',{key:i,staticClass:\"comment-item\"},[_c('div',{staticClass:\"cell-header\"},[_c('van-image',{attrs:{\"round\":\"\",\"width\":\"30\",\"height\":\"30\",\"src\":comment.user.photo_domain+comment.user.profile_image_url.split(',')[0]}}),_c('div',{staticClass:\"right-header\"},[_c('div',{staticClass:\"author\"},[_vm._v(_vm._s(comment.user.screen_name))])])],1),_c('p',{staticClass:\"text\",domProps:{\"innerHTML\":_vm._s(comment.text)}})])}),0)]),_c('div',{staticClass:\"input-comments\"},[_c('van-field',{attrs:{\"rows\":\"2\",\"autosize\":\"\",\"label\":\"评论\",\"type\":\"textarea\",\"maxlength\":\"50\",\"placeholder\":\"请输入评论\",\"show-word-limit\":\"\"},model:{value:(_vm.commnetValue),callback:function ($$v) {_vm.commnetValue=$$v},expression:\"commnetValue\"}})],1),_c('van-button',{staticClass:\"btn\",attrs:{\"type\":\"info\",\"block\":\"\",\"size\":\"small\"},on:{\"click\":_vm.commitComment}},[_vm._v(\"提交评论\")])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"article\">\r\n       \r\n        <template v-if=\"article && article.original_status\">\r\n            <van-nav-bar\r\n                :fixed=\"true\"\r\n                :placeholder=\"true\"\r\n                :title=\"article.original_status.title\"\r\n                left-text=\"返回\"\r\n                left-arrow\r\n                @click-left=\"goBack\"\r\n            />\r\n            <!-- 返回导航，文章标题 -->\r\n            <div class=\"cell-header\">\r\n                <van-image\r\n                    round\r\n                    width=\"30\"\r\n                    height=\"30\"\r\n                    :src=\"\r\n                        article.original_status.user.photo_domain\r\n                        +article.original_status.user.profile_image_url.split(',')[0]\r\n                    \"\r\n                ></van-image>\r\n                <div class=\"right-header\">\r\n                    <div class=\"author\">{{article.original_status.user.screen_name}}</div>\r\n                    <div class=\"pubtime\">{{article.original_status.timeBefore}}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"content\" v-html=\"article.original_status&&article.original_status.text\"></div>\r\n        </template>\r\n\r\n        <template v-if=\"articleCache&&articleCache.original_status\">\r\n            <van-nav-bar\r\n                :fixed=\"true\"\r\n                :placeholder=\"true\"\r\n                :title=\"articleCache.original_status.title\"\r\n                left-text=\"返回\"\r\n                left-arrow\r\n                @click-left=\"goBack\"\r\n            />\r\n            <div class=\"cell-header\">\r\n                <van-image\r\n                    round\r\n                    width=\"30\"\r\n                    height=\"30\"\r\n                    :src=\"\r\n                        articleCache.original_status.user.photo_domain\r\n                        +articleCache.original_status.user.profile_image_url.split(',')[0]\r\n                    \"\r\n                ></van-image>\r\n                <div class=\"right-header\">\r\n                    <div class=\"author\">{{articleCache.original_status.user.screen_name}}</div>\r\n                    <div class=\"pubtime\">{{articleCache.original_status.timeBefore}}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"content\" v-html=\"articleCache.original_status&&articleCache.original_status.text\"></div>\r\n        </template>\r\n\r\n        <!-- 评论 -->\r\n        <div class=\"comments\">\r\n            <h3>评论</h3>\r\n            <div class=\"comment-list\">\r\n                <div class=\"comment-item\" v-for=\"comment,i in comments\" :key=\"i\">\r\n                     <div class=\"cell-header\">\r\n                        <van-image\r\n                            round\r\n                            width=\"30\"\r\n                            height=\"30\"\r\n                            :src=\"comment.user.photo_domain+comment.user.profile_image_url.split(',')[0]\"\r\n                        ></van-image>\r\n                        <div class=\"right-header\">\r\n                            <div class=\"author\">{{comment.user.screen_name}}</div>\r\n                        \r\n                        </div>\r\n\r\n                    </div>\r\n                    <p class=\"text\" v-html=\"comment.text\"> </p>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"input-comments\">\r\n            <van-field\r\n                v-model=\"commnetValue\"\r\n                rows=\"2\"\r\n                autosize\r\n                label=\"评论\"\r\n                type=\"textarea\"\r\n                maxlength=\"50\"\r\n                placeholder=\"请输入评论\"\r\n                show-word-limit\r\n            />\r\n        </div>\r\n        <van-button class=\"btn\" type=\"info\" block size=\"small\" @click=\"commitComment\">提交评论</van-button>\r\n    </div>\r\n</template>\r\n\r\n<script >\r\nimport * as api from \"@/api/index\"\r\nimport { Toast } from \"vant\";\r\nexport default{\r\n    data(){\r\n        return{\r\n            // article:{}\r\n            articleCache:{},\r\n            comments:[],\r\n            commnetValue:\"\"\r\n        }\r\n    },\r\n    props:[\"article\"],\r\n    methods:{\r\n        goBack(){\r\n            // this.$router.back();\r\n            this.$router.go(-1);\r\n        },\r\n        async getComments(){\r\n            let result = await api.getArticleComments({id:this.$route.params.id}) \r\n            console.log(result)\r\n            this.comments = result.comments\r\n        },\r\n        async commitComment(){\r\n            if(this.$store.state.user && this.$store.state.user.token){\r\n                    let result = await api.postArticleComment({\r\n                    id:this.$route.params.id,\r\n                    commnetValue:this.message\r\n                    \r\n                // console.log(result)\r\n                })\r\n                if(result.result==='ok'){\r\n                    // this.comments.push({\r\n                    //     user:{}\r\n                    // })\r\n                    Toast.success('评论成功')\r\n                }\r\n            }else{\r\n                Toast.fail('尚未登录，请登录后评论')\r\n                this.$router.push('/login')\r\n            }\r\n           \r\n        }\r\n    },\r\n    mounted(){\r\n        // console.log(this)\r\n        // this.article = this.$route.params.article;\r\n        let articles = {} \r\n        if(this.article){\r\n            articles[this.article.id] = this.article\r\n            sessionStorage.articles = JSON.stringify(articles)\r\n        }else{\r\n            if(sessionStorage.articles){\r\n                articles = JSON.parse(sessionStorage.articles)\r\n                this.articleCache = articles[this.$route.params.id]\r\n            }else{\r\n                // 服务器请求文章数据\r\n                // 请求数据覆盖缓存articleCache\r\n                // 顺带缓存到本地存储sessionStorage.articles\r\n            }\r\n            \r\n        }\r\n        this.getComments()\r\n    },\r\n    activated(){\r\n        let articles = {} \r\n        if(this.article){\r\n            articles[this.article.id] = this.article\r\n            sessionStorage.articles = JSON.stringify(articles)\r\n        }else{\r\n            if(sessionStorage.articles){\r\n                articles = JSON.parse(sessionStorage.articles)\r\n                this.articleCache = articles[this.$route.params.id]\r\n            }else{\r\n                // 服务器请求文章数据\r\n                // 请求数据覆盖缓存articleCache\r\n                // 顺带缓存到本地存储sessionStorage.articles\r\n            }\r\n            \r\n        }\r\n        this.getComments()\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.cell-header{\r\n    padding:0.2rem;\r\n    display: flex;\r\n    height: 2rem;\r\n    .right-header{\r\n        font-size: 0.3rem;\r\n        line-height: 1rem;\r\n        padding-left: 1rem;\r\n        .pubtime{\r\n            color:#999\r\n        }\r\n    }\r\n}   \r\n.content{\r\n    padding:0 0.4rem 1.2rem;\r\n    text-align: left;\r\n    ::v-deep p{\r\n        color:#666;\r\n        font-size: 0.9rem;\r\n    }\r\n    ::v-deep img{\r\n        max-width: 100%;\r\n    }\r\n   \r\n}\r\n.cell-header{\r\n    display: flex;\r\n    height: 2.5rem;\r\n    align-items: center;\r\n    .right-header{\r\n        font-size: 0.3rem;\r\n        line-height: 1rem;\r\n        padding-left: 1rem;\r\n        \r\n    }\r\n    .author{\r\n        font-size: 1rem;\r\n        padding: 0 0.2rem;\r\n    }\r\n   \r\n}  \r\np{\r\n    padding:1rem 0 ;\r\n    margin-bottom: 0;\r\n}\r\n.text{\r\n    color:#666;\r\n    font-size: 1rem;\r\n    padding: 0 3rem 1rem;\r\n    text-align: left;\r\n}\r\n.comment-item{\r\n    background-color: #efefef;\r\n    margin:0.1rem;\r\n    border-radius: 0.2rem;\r\n} \r\n.comments h3{\r\n    text-align: left;\r\n}\r\n\r\n.input-comments{\r\n    border:1px solid skyblue;\r\n    border-radius: 0.4rem;\r\n    margin: 0.2rem 0;\r\n}\r\n.btn{\r\n    margin: 0.4rem 0;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Article.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Article.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Article.vue?vue&type=template&id=63b38193&scoped=true&\"\nimport script from \"./Article.vue?vue&type=script&lang=js&\"\nexport * from \"./Article.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Article.vue?vue&type=style&index=0&id=63b38193&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"63b38193\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","article","original_status","attrs","title","on","goBack","user","photo_domain","profile_image_url","split","_v","_s","screen_name","timeBefore","domProps","text","_e","articleCache","_l","comment","i","key","model","value","callback","$$v","commnetValue","expression","commitComment","staticRenderFns","data","comments","props","methods","getComments","api","id","result","console","Toast","mounted","articles","sessionStorage","activated","component"],"sourceRoot":""}