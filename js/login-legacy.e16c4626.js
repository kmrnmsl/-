"use strict";(self["webpackChunkvue2_finance"]=self["webpackChunkvue2_finance"]||[]).push([[535],{3286:function(e,s,t){t.r(s),t.d(s,{default:function(){return p}});var n=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"login"},[t("div",{staticClass:"close"},[t("van-icon",{attrs:{name:"cross"},on:{click:e.goBack}})],1),t("div",{staticClass:"logo"},[t("van-image",{attrs:{width:"3rem",height:"3rem",src:"/imgs/logo.png"}})],1),t("div",{staticClass:"logoForm"},[t("van-form",{on:{submit:e.onSubmit}},[t("van-cell-group",{attrs:{inset:""}},[e.isAccount?t("van-field",{attrs:{name:"用户名",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:e.account,callback:function(s){e.account=s},expression:"account"}}):t("van-field",{attrs:{name:"手机号",label:"手机号",placeholder:"手机号",rules:e.mobileRules},model:{value:e.mobile,callback:function(s){e.mobile=s},expression:"mobile"}}),e.isAccount?t("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请输入密码"}]},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}}):t("van-field",{attrs:{type:"text",name:"sms",label:"验证码",placeholder:"验证码",rules:e.smsRules},model:{value:e.sms,callback:function(s){e.sms=s},expression:"sms"}}),e.isAccount?e._e():t("van-button",{staticClass:"sms",attrs:{disabled:e.disabled,"native-type":"button",type:"info ",size:"mini"},on:{click:e.sendSms}},[e._v(e._s(e.disabled?e.num+"s":"发送验证码"))])],1),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("提交")])],1)],1),t("span",{staticClass:"tips",on:{click:function(s){e.isAccount=!e.isAccount}}},[e._v(e._s(e.isAccount?"切换手机验证码登录":"切换账号密码登录"))])],1)])},a=[],r=t(7906),c=t(6198),i=(t(1539),t(693)),o=t(8256),u={data:function(){return{account:"",password:"",mobile:"",isAccount:!0,sms:"",disabled:!1,num:10,smsRules:[{required:!0,message:"请填写密码"},{pattern:/\d{4}/,message:"请输入4个字符的验证码"},{validator:function(){var e=(0,c.Z)((0,r.Z)().mark((function e(s){var t,n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o.Z.loading("验证中..."),t=function(e){return new Promise((function(s,t){setTimeout((function(){"1234"==e.code?s({result:"验证码验证成功!",msg:"ok"}):s({result:"验证码验证失败!",msg:"fail"})}),1e3)}))},e.next=4,t({code:s});case 4:if(n=e.sent,o.Z.clear(),"ok"!=n.msg){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));function s(s){return e.apply(this,arguments)}return s}(),message:"请输入正确的短信验证码"}],mobileRules:[{required:!0,message:"请填写手机号"},{validator:function(e){return 11==e.length},message:"请输入正确的手机号"}]}},methods:{goBack:function(){this.$router.back()},onSubmit:function(){var e=this;return(0,c.Z)((0,r.Z)().mark((function s(){var t;return(0,r.Z)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.$store.dispatch("login",{account:e.account,password:e.password});case 2:t=s.sent,"操作成功"===t.msg&&e.$router.back();case 4:case"end":return s.stop()}}),s)})))()},sendSms:function(e){var s=this;return(0,c.Z)((0,r.Z)().mark((function t(){var n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,i.Cq({mobile:s.account});case 3:n=t.sent,o.Z.success(n.msg),s.disabled=!0,a=setInterval((function(){s.num--}),1e3),setTimeout((function(){s.disabled=!1,clearInterval(a),s.num=10}),1e4);case 8:case"end":return t.stop()}}),t)})))()}}},l=u,m=t(1001),d=(0,m.Z)(l,n,a,!1,null,"27949b0e",null),p=d.exports}}]);
//# sourceMappingURL=login-legacy.e16c4626.js.map