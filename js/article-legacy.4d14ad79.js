"use strict";(self["webpackChunkvue2_finance"]=self["webpackChunkvue2_finance"]||[]).push([[942],{4840:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"article"},[t.article&&t.article.original_status?[a("van-nav-bar",{attrs:{fixed:!0,placeholder:!0,title:t.article.original_status.title,"left-text":"返回","left-arrow":""},on:{"click-left":t.goBack}}),a("div",{staticClass:"cell-header"},[a("van-image",{attrs:{round:"",width:"30",height:"30",src:t.article.original_status.user.photo_domain+t.article.original_status.user.profile_image_url.split(",")[0]}}),a("div",{staticClass:"right-header"},[a("div",{staticClass:"author"},[t._v(t._s(t.article.original_status.user.screen_name))]),a("div",{staticClass:"pubtime"},[t._v(t._s(t.article.original_status.timeBefore))])])],1),a("div",{staticClass:"content",domProps:{innerHTML:t._s(t.article.original_status&&t.article.original_status.text)}})]:t._e(),t.articleCache&&t.articleCache.original_status?[a("van-nav-bar",{attrs:{fixed:!0,placeholder:!0,title:t.articleCache.original_status.title,"left-text":"返回","left-arrow":""},on:{"click-left":t.goBack}}),a("div",{staticClass:"cell-header"},[a("van-image",{attrs:{round:"",width:"30",height:"30",src:t.articleCache.original_status.user.photo_domain+t.articleCache.original_status.user.profile_image_url.split(",")[0]}}),a("div",{staticClass:"right-header"},[a("div",{staticClass:"author"},[t._v(t._s(t.articleCache.original_status.user.screen_name))]),a("div",{staticClass:"pubtime"},[t._v(t._s(t.articleCache.original_status.timeBefore))])])],1),a("div",{staticClass:"content",domProps:{innerHTML:t._s(t.articleCache.original_status&&t.articleCache.original_status.text)}})]:t._e(),a("div",{staticClass:"comments"},[a("h3",[t._v("评论")]),a("div",{staticClass:"comment-list"},t._l(t.comments,(function(e,s){return a("div",{key:s,staticClass:"comment-item"},[a("div",{staticClass:"cell-header"},[a("van-image",{attrs:{round:"",width:"30",height:"30",src:e.user.photo_domain+e.user.profile_image_url.split(",")[0]}}),a("div",{staticClass:"right-header"},[a("div",{staticClass:"author"},[t._v(t._s(e.user.screen_name))])])],1),a("p",{staticClass:"text",domProps:{innerHTML:t._s(e.text)}})])})),0)]),a("div",{staticClass:"input-comments"},[a("van-field",{attrs:{rows:"2",autosize:"",label:"评论",type:"textarea",maxlength:"50",placeholder:"请输入评论","show-word-limit":""},model:{value:t.commnetValue,callback:function(e){t.commnetValue=e},expression:"commnetValue"}})],1),a("van-button",{staticClass:"btn",attrs:{type:"info",block:"",size:"small"},on:{click:t.commitComment}},[t._v("提交评论")])],2)},i=[],r=a(7906),n=a(6198),c=(a(8862),a(693)),l=a(8256),o={data:function(){return{articleCache:{},comments:[],commnetValue:""}},props:["article"],methods:{goBack:function(){this.$router.go(-1)},getComments:function(){var t=this;return(0,n.Z)((0,r.Z)().mark((function e(){var a;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.lk({id:t.$route.params.id});case 2:a=e.sent,console.log(a),t.comments=a.comments;case 5:case"end":return e.stop()}}),e)})))()},commitComment:function(){var t=this;return(0,n.Z)((0,r.Z)().mark((function e(){var a;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$store.state.user||!t.$store.state.user.token){e.next=7;break}return e.next=3,c.eW({id:t.$route.params.id,commnetValue:t.message});case 3:a=e.sent,"ok"===a.result&&l.Z.success("评论成功"),e.next=9;break;case 7:l.Z.fail("尚未登录，请登录后评论"),t.$router.push("/login");case 9:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t={};this.article?(t[this.article.id]=this.article,sessionStorage.articles=JSON.stringify(t)):sessionStorage.articles&&(t=JSON.parse(sessionStorage.articles),this.articleCache=t[this.$route.params.id]),this.getComments()},activated:function(){var t={};this.article?(t[this.article.id]=this.article,sessionStorage.articles=JSON.stringify(t)):sessionStorage.articles&&(t=JSON.parse(sessionStorage.articles),this.articleCache=t[this.$route.params.id]),this.getComments()}},u=o,m=a(1001),h=(0,m.Z)(u,s,i,!1,null,"63b38193",null),d=h.exports}}]);
//# sourceMappingURL=article-legacy.4d14ad79.js.map